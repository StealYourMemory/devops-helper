import{d as f,o as l,c as p,a as r,e as q,r as i,g as n,w as t,M as A,j as C,f as o,n as F,t as g,z as c,F as U,l as G,m as S,D as J,G as L,H as K,E as Q}from"./index-B8KVQuq1.js";import{e as W}from"./projectApi-DNyIEPDE.js";const Be={projectName:{required:!0,message:"请选择项目名",trigger:"change"},branch:{required:!0,message:"请选择分支",trigger:"change"},environment:{required:!0,message:"请选择部署环境",trigger:"change"},tag:{required:!0,message:"请输入打包tag",trigger:"change"}},Te={projectName:{required:!0,message:"请选择项目名",trigger:"change"},branch:{required:!0,message:"请选择分支",trigger:"change"},tag:{required:!0,message:"请输入打包tag",trigger:"change"}},qe={projectName:{required:!0,message:"请选择项目名",trigger:"change"},environment:{required:!0,message:"请选择部署环境",trigger:"change"},tag:{required:!0,message:"请输入打包tag",trigger:"change"}},X=["width","height"],Y=r("path",{d:"M512 64C264.576 64 64 264.576 64 512c0 247.424 200.576 448 448 448s448-200.576 448-448C960 264.576 759.424 64 512 64zM512 848c-185.536 0-336-150.464-336-336S326.464 176 512 176 848 326.464 848 512 697.536 848 512 848zM512 400c-30.912 0-56 25.088-56 56l0 224C456 710.912 481.088 736 512 736s56-25.088 56-56l0-224C568 425.088 542.912 400 512 400zM512 232c-30.912 0-56 25.088-56 56S481.088 344 512 344 568 318.912 568 288 542.912 232 512 232z","p-id":"4436"},null,-1),Z=[Y],ee=f({__name:"DetailIcon",props:{width:{default:24},height:{default:24}},setup(h){return(s,d)=>(l(),p("svg",{t:"1715346431342",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4435",width:s.width,height:s.height},Z,8,X))}}),te=["width","height"],se=r("path",{d:"M966.208 246.752L534.144 21.408a47.968 47.968 0 0 0-44.128-0.128L58.08 243.136A47.968 47.968 0 0 0 32 285.824V744.64c0 18.208 10.304 34.848 26.592 42.976l432 215.36a48 48 0 0 0 42.816 0l432-215.36A48 48 0 0 0 992 744.672V289.344c0-17.92-9.952-34.304-25.792-42.592zM508.384 463.68l-162.176-79.808 367.36-196.704 158.4 82.624-363.584 193.888z m3.488-381.696l132.992 69.376-369.312 197.76-144.896-71.328 381.216-195.808zM96 332.096l153.216 75.392v168.256a32 32 0 0 0 64 0v-136.736L480 521.024v405.184L96 734.752V332.096z m448 594.112V517.184l384-204.736v422.304l-384 191.456z","p-id":"11984"},null,-1),oe=[se],Fe=f({__name:"PackageOnlyIcon",props:{width:{default:24},height:{default:24}},setup(h){return(s,d)=>(l(),p("svg",{t:"1715178638706",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"11983",width:s.width,height:s.height},oe,8,te))}}),le=["width","height"],re=r("path",{d:"M832 272c0-62.4-51-112.9-113.6-112-60.7 0.9-110 50.6-110.4 111.3-0.3 52.6 35.6 96.8 84.2 109.2 14 3.6 23.8 16 24.1 30.4 0.5 27.3-4.4 57.4-22.3 82.5-28.7 40.3-80.7 54.9-126.6 67.8-29 8.1-50.1 10.2-68.7 12-26.4 2.6-51.4 5.1-82.6 23-6.6 3.8-13.1 8-19.2 12.6-5.3 4-12.8 0.2-12.8-6.4V241.3c0-12.2 6.8-23.5 17.7-28.9 37.1-18.4 62.6-56.8 62.3-101.1-0.5-62.8-53.2-113.4-116-111.2C288.1 2.1 240 51.4 240 112c0 44 25.4 82.1 62.3 100.4 10.9 5.4 17.7 16.5 17.7 28.6v541.7c0 12.2-6.8 23.5-17.7 28.9-37.1 18.4-62.6 56.8-62.3 101.1 0.4 62.8 53.1 113.3 115.9 111.2C416 1021.9 464 972.5 464 912c0-44-25.4-82.1-62.3-100.4-10.9-5.4-17.7-16.5-17.7-28.6v-19.2c0-42 19.9-81.8 54.3-105.9 3.1-2.2 6.4-4.3 9.7-6.2 19.3-11.1 33.5-12.5 57-14.8 20.2-2 45.3-4.5 79.7-14.1 50.5-14.2 119.6-33.5 161.4-92.3 24-33.7 35.4-75 34.1-123-0.2-6.9-0.7-13.8-1.4-20.9-1.1-10.7 3.5-21 11.8-27.8 25.3-20.4 41.4-51.7 41.4-86.8zM304 112c0-26.5 21.5-48 48-48s48 21.5 48 48-21.5 48-48 48-48-21.5-48-48z m96 800c0 26.5-21.5 48-48 48s-48-21.5-48-48 21.5-48 48-48 48 21.5 48 48z m320-592c-26.5 0-48-21.5-48-48s21.5-48 48-48 48 21.5 48 48-21.5 48-48 48z","p-id":"1554"},null,-1),ae=[re],ne=f({__name:"BranchIcon",props:{width:{default:24},height:{default:24}},setup(h){return(s,d)=>(l(),p("svg",{t:"1715237710619",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1553",width:s.width,height:s.height},ae,8,le))}}),ie=["width","height"],de=r("path",{d:"M323.008 786.752c-52.928 0-96-43.072-96-96s43.072-96 96-96 96 43.072 96 96S375.936 786.752 323.008 786.752zM323.008 658.752c-17.632 0-32 14.336-32 32s14.368 32 32 32 32-14.336 32-32S340.64 658.752 323.008 658.752z",fill:"#5E6570","p-id":"8097"},null,-1),ce=r("path",{d:"M416.096 927.072 284.224 927.072c-159.936 0-186.912-59.232-186.912-192l0-140.8c0-74.272 14.304-96.256 70.72-150.976l327.04-319.904c36.576-35.488 105.888-35.392 142.304-0.096l263.072 256.032c18.336 17.792 28.864 43.552 28.864 70.656 0 27.296-10.656 53.28-29.248 71.264l-290.016 294.592C544.544 880.416 497.216 927.072 416.096 927.072zM566.24 159.488c-10.496 0-20.16 3.52-26.528 9.696l-327.04 319.936c-49.952 48.48-51.36 54.528-51.36 105.152l0 140.8c0 110.272 8.352 128 122.912 128l131.872 0c52.672 0 83.744-28.48 148.992-92.8l26.656-26.144 263.232-268.256c6.784-6.592 10.336-15.808 10.336-25.888 0-9.888-3.424-18.88-9.472-24.736l-263.072-256.032C586.432 163.04 576.736 159.488 566.24 159.488z",fill:"#61656E","p-id":"8098"},null,-1),ue=[de,ce],ge=f({__name:"TagIcon",props:{width:{default:24},height:{default:24}},setup(h){return(s,d)=>(l(),p("svg",{t:"1715239579695",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"8096",width:s.width,height:s.height},ue,8,ie))}}),pe=["innerHTML"],he=f({__name:"BuildDetail",props:{content:{default:""},style:{default:()=>({height:600,width:400,borderRadius:15,padding:10})}},setup(h){const s=h,d=q(()=>`<pre>${s.content}</pre>`),z=q(()=>({borderRadius:s.style.borderRadius+"px"})),_=q(()=>({padding:s.style.padding+"px",backgroundColor:"#F2F2F2",borderRadius:s.style.borderRadius+"px"}));return(V,k)=>{const B=i("el-scrollbar");return l(),n(B,{height:V.style.height,style:A(z.value)},{default:t(()=>[r("div",{style:A(_.value)},[r("div",{innerHTML:d.value,class:"formatted-text"},null,8,pe)],4)]),_:1},8,["height","style"])}}}),_e=["width","height"],me=r("path",{d:"M523.5 831a351.39 351.39 0 1 1 137.22-27.71A350.3 350.3 0 0 1 523.5 831z m0-651C358.91 180 225 313.91 225 478.5S358.91 777 523.5 777 822 643.09 822 478.5 688.09 180 523.5 180z","p-id":"8007"},null,-1),fe=r("path",{d:"M512 539a27 27 0 0 1-27-27V303a27 27 0 0 1 54 0v209a27 27 0 0 1-27 27z","p-id":"8008"},null,-1),we=r("path",{d:"M722 539H524a27 27 0 0 1 0-54h198a27 27 0 0 1 0 54z","p-id":"8009"},null,-1),ve=[me,fe,we],ye=f({__name:"TookTimeIcon",props:{width:{default:24},height:{default:24}},setup(h){return(s,d)=>(l(),p("svg",{t:"1715346528025",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"8006",width:s.width,height:s.height},ve,8,_e))}}),be={style:{width:"90%"}},$e=r("br",null,null,-1),ze=r("br",null,null,-1),ke={style:{"font-weight":"bold",color:"#303133","margin-left":"5px"}},Pe={style:{"font-weight":"bold"}},Me={style:{"font-weight":"bold"}},Ce=r("span",{style:{"font-weight":"bold","vertical-align":"middle","margin-left":"10px"}},"控制台输出",-1),Ne=f({__name:"BuildAndDeployProgress",props:{progress:{default:null}},setup(h){const s=C(["build","deploy"]),d=C(!1),z=C(""),_=C("Success");async function V(e){_.value=e.status;const a=await W(e.projectName,e.id);a.success?(z.value=a.data,d.value=!0):Q.error(a.msg)}function k(e){if(e==null)return"--";const a=Math.floor(e/60),P=e-a*60;let m="";return a>0&&(m+=`${a}分`),m+=`${P}秒`,m}function B(e){return Math.floor(e.tookTime/(e.tookTime+e.remainingTime)*100)}return(e,a)=>{const P=i("el-progress"),m=i("el-tooltip"),u=i("el-space"),E=i("el-button"),j=i("el-text"),N=i("el-collapse-item"),I=i("el-scrollbar"),H=i("el-collapse"),x=i("el-card"),M=i("el-icon"),O=i("el-dialog");return l(),p("div",be,[o(x,null,{default:t(()=>[o(H,{modelValue:s.value,"onUpdate:modelValue":a[1]||(a[1]=w=>s.value=w)},{default:t(()=>{var w,R;return[(w=e.progress)!=null&&w.buildProgress?(l(),n(N,{key:0,name:"build",title:"打包进度"},{default:t(()=>{var y,b,T,$;return[(b=(y=e.progress)==null?void 0:y.buildProgress)!=null&&b.success?(l(),n(u,{key:0,wrap:"",direction:"vertical"},{default:t(()=>[e.progress.buildProgress.data.status==="Pending"?(l(),n(u,{key:0},{default:t(()=>[o(m,null,{content:t(()=>[F(" 已用时间："+g(k(e.progress.buildProgress.data.tookTime)),1),$e,F(" 预计还需："+g(k(e.progress.buildProgress.data.remainingTime)),1),ze]),default:t(()=>[o(P,{type:"circle",percentage:B(e.progress.buildProgress.data),width:80,style:{"text-align":"center"}},null,8,["percentage"])]),_:1})]),_:1})):(l(),n(u,{key:1},{default:t(()=>[o(P,{type:"circle",percentage:100,status:e.progress.buildProgress.data.status==="Success"?"success":"exception",width:80,style:{"text-align":"center"}},null,8,["status"])]),_:1})),o(u,null,{default:t(()=>[o(m,{content:"详情",placement:"bottom",effect:"light"},{default:t(()=>[o(E,{text:"",onClick:a[0]||(a[0]=v=>V(e.progress.buildProgress.data))},{default:t(()=>[o(ee,{width:18,height:18}),r("span",ke,g(`${e.progress.buildProgress.data.id}`),1)]),_:1})]),_:1}),o(u,{size:5},{default:t(()=>[o(ne,{width:18,height:18}),r("span",Pe,g(`${e.progress.buildProgress.data.branch}`),1)]),_:1}),o(u,{size:5},{default:t(()=>[o(ge,{width:18,height:18}),r("span",Me,g(`${e.progress.buildProgress.data.tag}`),1)]),_:1}),e.progress.buildProgress.data.status!=="Pending"?(l(),n(u,{key:0,size:5},{default:t(()=>[o(m,{content:"耗时",placement:"bottom",effect:"light"},{default:t(()=>[o(ye,{width:18,height:18})]),_:1}),r("span",null,g(k(e.progress.buildProgress.data.tookTime)),1)]),_:1})):c("",!0)]),_:1})]),_:1})):c("",!0),(($=(T=e.progress)==null?void 0:T.buildProgress)==null?void 0:$.success)===!1?(l(),n(u,{key:1,wrap:"",direction:"vertical"},{default:t(()=>[o(j,{type:"danger"},{default:t(()=>{var v,D;return[F("失败："+g((D=(v=e.progress)==null?void 0:v.buildProgress)==null?void 0:D.msg),1)]}),_:1})]),_:1})):c("",!0)]}),_:1})):c("",!0),(R=e.progress)!=null&&R.deployProgress?(l(),n(N,{key:1,name:"deploy",title:"部署进度"},{default:t(()=>{var y;return[(y=e.progress)!=null&&y.deployProgress?(l(),n(I,{key:0},{default:t(()=>{var b;return[(l(!0),p(U,null,G((b=e.progress)==null?void 0:b.deployProgress,(T,$)=>{var v;return l(),p("div",{class:"scrollbar-flex-content",key:$},[r("pre",null,g((v=e.progress)==null?void 0:v.deployProgress[$]),1)])}),128))]}),_:1})):c("",!0)]}),_:1})):c("",!0)]}),_:1},8,["modelValue"])]),_:1}),o(O,{modelValue:d.value,"onUpdate:modelValue":a[2]||(a[2]=w=>d.value=w),center:"",draggable:"","destroy-on-close":"",style:{"border-radius":"15px"},width:"70%"},{header:t(()=>[r("div",null,[_.value==="Success"?(l(),n(M,{key:0,color:"#67C23A",size:"28",style:{"vertical-align":"middle"}},{default:t(()=>[o(S(J))]),_:1})):c("",!0),_.value==="Failed"?(l(),n(M,{key:1,color:"#F56C6C",size:"28",style:{"vertical-align":"middle"}},{default:t(()=>[o(S(L))]),_:1})):c("",!0),_.value==="Aborted"?(l(),n(M,{key:2,color:"#909399",size:"28",style:{"vertical-align":"middle"}},{default:t(()=>[o(S(L))]),_:1})):c("",!0),_.value==="Pending"?(l(),n(M,{key:3,color:"#409EFF",size:"28",style:{"vertical-align":"middle"}},{default:t(()=>[o(S(K))]),_:1})):c("",!0),Ce])]),default:t(()=>[o(he,{content:z.value,style:{height:600,width:400,borderRadius:15,padding:0}},null,8,["content"])]),_:1},8,["modelValue"])])}}});export{ee as _,Te as a,Fe as b,he as c,qe as d,ne as e,ge as f,ye as g,Ne as h,Be as p};
