<template>
  <el-scrollbar :height="style.height" :style="scrollbarStyle">
    <div :style="divStyle">
      <div v-html="preContent" class="formatted-text"></div>
    </div>
  </el-scrollbar>
</template>

<script setup lang="ts">
import {computed} from "vue";
import type BuildDetailStyle from "@/@types/deploy/common/buildDetailStyle";

interface Props {
  content: string;
  style: BuildDetailStyle
}

const props = withDefaults(defineProps<Props>(), {
  content: "",
  style: () => (
      {
        height: 600,
        width: 400,
        borderRadius: 15,
        padding: 10
      }
  )
});

const preContent = computed(()=>{
  return `<pre>${props.content}</pre>`
})

const scrollbarStyle = computed(() => {
  return {borderRadius: props.style.borderRadius + "px",}
})

const divStyle = computed(() => {
  return {padding: props.style.padding + "px",backgroundColor:"#F2F2F2",borderRadius: props.style.borderRadius + "px"}
})

// const content = ref<string>('');
// content.value = "<pre>Started by user <a href='/user/admin' class='model-link model-link--float'>admin</a>\nRunning as SYSTEM\nBuilding on the built-in node in workspace /jenkins/workspace/uca-network-slb\nThe recommended git tool is: NONE\nusing credential github-rd\n &gt; git rev-parse --resolve-git-dir /jenkins/workspace/uca-network-slb/.git # timeout=10\nFetching changes from the remote Git repository\n &gt; git config remote.origin.url <a href='http://gitlab.rd.unicloud.com/moove/uni-network/network-slb.git'>http://gitlab.rd.unicloud.com/moove/uni-network/network-slb.git</a> # timeout=10\nFetching upstream changes from <a href='http://gitlab.rd.unicloud.com/moove/uni-network/network-slb.git'>http://gitlab.rd.unicloud.com/moove/uni-network/network-slb.git</a>\n &gt; git --version # timeout=10\n &gt; git --version # 'git version 2.25.1'\nusing GIT_ASKPASS to set credentials github@rd\n &gt; git fetch --tags --force --progress -- <a href='http://gitlab.rd.unicloud.com/moove/uni-network/network-slb.git'>http://gitlab.rd.unicloud.com/moove/uni-network/network-slb.git</a> +refs/heads/*:refs/remotes/origin/* # timeout=10\n &gt; git rev-parse refs/remotes/origin/release^{commit} # timeout=10\nChecking out Revision ca5d8d935ab45d4e81c265b15d1f0fcf53e1af39 (refs/remotes/origin/release)\n &gt; git config core.sparsecheckout # timeout=10\n &gt; git checkout -f ca5d8d935ab45d4e81c265b15d1f0fcf53e1af39 # timeout=10\nCommit message: \"Merge branch '0430_bugfix_yhs' into 'release'\"\n &gt; git rev-list --no-walk 94dcb98fddd6aff815a1e105ef213476cda9d5f4 # timeout=10\n[uca-network-slb] $ /bin/sh -xe /tmp/jenkins6333146607144173950.sh\n+ pwd\n/jenkins/workspace/uca-network-slb\n+ env\nJENKINS_HOME=/jenkins\nGIT_PREVIOUS_SUCCESSFUL_COMMIT=94dcb98fddd6aff815a1e105ef213476cda9d5f4\nCI=true\nRUN_CHANGES_DISPLAY_URL=<a href='http://10.253.17.50/job/uca-network-slb/463/display/redirect?page=changes'>http://10.253.17.50/job/uca-network-slb/463/display/redirect?page=changes</a>\nBRANCH=release\nNODE_LABELS=master\nHUDSON_URL=<a href='http://10.253.17.50/'>http://10.253.17.50/</a>\nGIT_COMMIT=ca5d8d935ab45d4e81c265b15d1f0fcf53e1af39\nBUILD_URL=<a href='http://10.253.17.50/job/uca-network-slb/463/'>http://10.253.17.50/job/uca-network-slb/463/</a>\nHUDSON_COOKIE=7fbb155a-da3b-4144-8350-aa8fbc00506c\nJENKINS_SERVER_COOKIE=e3996ff2c36b3b55\nDOCKER_TAG=20240508-v1\nWORKSPACE=/jenkins/workspace/uca-network-slb\nNODE_NAME=master\nJOURNAL_STREAM=9:31453\nRUN_ARTIFACTS_DISPLAY_URL=<a href='http://10.253.17.50/job/uca-network-slb/463/display/redirect?page=artifacts'>http://10.253.17.50/job/uca-network-slb/463/display/redirect?page=artifacts</a>\nEXECUTOR_NUMBER=17\nGIT_BRANCH=origin/release\nRUN_TESTS_DISPLAY_URL=<a href='http://10.253.17.50/job/uca-network-slb/463/display/redirect?page=tests'>http://10.253.17.50/job/uca-network-slb/463/display/redirect?page=tests</a>\nBUILD_DISPLAY_NAME=#463\nHUDSON_HOME=/jenkins\nJOB_BASE_NAME=uca-network-slb\nPATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/snap/bin\nINVOCATION_ID=13ac32283d8148da92942b61ebbf4339\nBUILD_ID=463\nBUILD_TAG=jenkins-uca-network-slb-463\nLANG=en_US.UTF-8\nJENKINS_URL=<a href='http://10.253.17.50/'>http://10.253.17.50/</a>\nJOB_URL=<a href='http://10.253.17.50/job/uca-network-slb/'>http://10.253.17.50/job/uca-network-slb/</a>\nGIT_URL=<a href='http://gitlab.rd.unicloud.com/moove/uni-network/network-slb.git'>http://gitlab.rd.unicloud.com/moove/uni-network/network-slb.git</a>\nBUILD_NUMBER=463\nBUILD_TIMESTAMP=2024-05-08 03:40:21 UTC\nRUN_DISPLAY_URL=<a href='http://10.253.17.50/job/uca-network-slb/463/display/redirect'>http://10.253.17.50/job/uca-network-slb/463/display/redirect</a>\nHUDSON_SERVER_COOKIE=e3996ff2c36b3b55\nJOB_DISPLAY_URL=<a href='http://10.253.17.50/job/uca-network-slb/display/redirect'>http://10.253.17.50/job/uca-network-slb/display/redirect</a>\nJOB_NAME=uca-network-slb\nJAVA_HOME=/usr/lib/jvm/adoptopenjdk-8-hotspot-amd64\nPWD=/jenkins/workspace/uca-network-slb\nGIT_PREVIOUS_COMMIT=94dcb98fddd6aff815a1e105ef213476cda9d5f4\nWORKSPACE_TMP=/jenkins/workspace/uca-network-slb@tmp\nGITLAB_OBJECT_KIND=none\n+ make clean\nStarting a Gradle Daemon (subsequent builds will be faster)\n&gt; Task :clean\n\nDeprecated Gradle features were used in this build, making it incompatible with Gradle 5.0.\nUse '--warning-mode all' to show the individual deprecation warnings.\nSee <a href='https://docs.gradle.org/4.10/userguide/command_line_interface.html#sec:command_line_warnings'>https://docs.gradle.org/4.10/userguide/command_line_interface.html#sec:command_line_warnings</a>\n\nBUILD SUCCESSFUL in 5s\n1 actionable task: 1 executed\n+ make image.push VERSION=20240508-v1\n\n&gt; Task :compileJava\n/jenkins/workspace/uca-network-slb/src/main/java/com/uca/network/dpvs/service/impl/DpvsAclRuleServiceImpl.java:44: warning: IPAddressUtil is internal proprietary API and may be removed in a future release\nimport sun.net.util.IPAddressUtil;\n                   ^\n/jenkins/workspace/uca-network-slb/src/main/java/com/uca/network/dpvs/service/impl/DpvsAclPolicyServiceImpl.java:44: warning: IPAddressUtil is internal proprietary API and may be removed in a future release\nimport sun.net.util.IPAddressUtil;\n                   ^\n/jenkins/workspace/uca-network-slb/src/main/java/com/uca/network/dpvs/mapper/acl/po/DpvsListenerAclPolicyRulePO.java:5: warning: Generating equals/hashCode implementation but without a call to superclass, even though this class does not extend java.lang.Object. If this is intentional, add '@EqualsAndHashCode(callSuper=false)' to your type.\n@Data\n^\n/jenkins/workspace/uca-network-slb/src/main/java/com/uca/network/common/exception/CommonException.java:4: warning: Generating equals/hashCode implementation but without a call to superclass, even though this class does not extend java.lang.Object. If this is intentional, add '@EqualsAndHashCode(callSuper=false)' to your type.\n@Data\n^\n/jenkins/workspace/uca-network-slb/src/main/java/com/uca/network/dpvs/service/impl/DpvsAclRuleServiceImpl.java:44: warning: IPAddressUtil is internal proprietary API and may be removed in a future release\nimport sun.net.util.IPAddressUtil;\n                   ^\n/jenkins/workspace/uca-network-slb/src/main/java/com/uca/network/dpvs/service/impl/DpvsAclPolicyServiceImpl.java:44: warning: IPAddressUtil is internal proprietary API and may be removed in a future release\nimport sun.net.util.IPAddressUtil;\n                   ^\n/jenkins/workspace/uca-network-slb/src/main/java/com/uca/network/dpvs/service/impl/DpvsAclRuleServiceImpl.java:44: warning: IPAddressUtil is internal proprietary API and may be removed in a future release\nimport sun.net.util.IPAddressUtil;\n                   ^\n/jenkins/workspace/uca-network-slb/src/main/java/com/uca/network/dpvs/service/impl/DpvsAclPolicyServiceImpl.java:44: warning: IPAddressUtil is internal proprietary API and may be removed in a future release\nimport sun.net.util.IPAddressUtil;\n                   ^\n/jenkins/workspace/uca-network-slb/src/main/java/com/uca/network/dpvs/service/impl/DpvsAclRuleServiceImpl.java:44: warning: IPAddressUtil is internal proprietary API and may be removed in a future release\nimport sun.net.util.IPAddressUtil;\n                   ^\n/jenkins/workspace/uca-network-slb/src/main/java/com/uca/network/dpvs/service/impl/DpvsAclPolicyServiceImpl.java:44: warning: IPAddressUtil is internal proprietary API and may be removed in a future release\nimport sun.net.util.IPAddressUtil;\n                   ^\n/jenkins/workspace/uca-network-slb/src/main/java/com/uca/network/common/utils/CertificateUtils.java:214: warning: unreachable catch clause\n        } catch (GeneralSecurityException e) {\n          ^\n  thrown types NoSuchAlgorithmException,InvalidKeySpecException have already been caught\n/jenkins/workspace/uca-network-slb/src/main/java/com/uca/network/common/exception/ErrorCode.java:422: warning: non-varargs call of varargs method with inexact argument type for last parameter;\n            return String.format(message, params);\n                                          ^\n  cast to Object for a varargs call\n  cast to Object[] for a non-varargs call and to suppress this warning\n/jenkins/workspace/uca-network-slb/src/main/java/com/uca/network/common/exception/AllocationsException.java:12: warning: non-varargs call of varargs method with inexact argument type for last parameter;\n        super(String.format(errorCode.getMessage(), args));\n                                                    ^\n  cast to Object for a varargs call\n  cast to Object[] for a non-varargs call and to suppress this warning\n/jenkins/workspace/uca-network-slb/src/main/java/com/uca/network/dpvs/service/impl/DpvsAclRuleServiceImpl.java:244: warning: IPAddressUtil is internal proprietary API and may be removed in a future release\n            if (!(etherType.equals(CommonConstant.IPV4) &amp;&amp; IPAddressUtil.isIPv4LiteralAddress(ip)) &amp;&amp;\n                                                           ^\n/jenkins/workspace/uca-network-slb/src/main/java/com/uca/network/dpvs/service/impl/DpvsAclRuleServiceImpl.java:245: warning: IPAddressUtil is internal proprietary API and may be removed in a future release\n                    !(etherType.equals(CommonConstant.IPV6) &amp;&amp; IPAddressUtil.isIPv6LiteralAddress(ip))) {\n                                                               ^\n/jenkins/workspace/uca-network-slb/src/main/java/com/uca/network/dpvs/service/impl/DpvsAclPolicyServiceImpl.java:253: warning: IPAddressUtil is internal proprietary API and may be removed in a future release\n            if (IPAddressUtil.isIPv4LiteralAddress(ruleArray[2])) {\n                ^\n/jenkins/workspace/uca-network-slb/src/main/java/com/uca/network/slb/service/impl/ComputeServiceImpl.java:120: warning: non-varargs call of varargs method with inexact argument type for last parameter;\n        String url = EnumUrls.query_vm_by_delivery_id.getUrlWithParam(new String[]{serverConfig.getComputeCenterService(), deliveryId});\n                                                                      ^\n  cast to Object for a varargs call\n  cast to Object[] for a non-varargs call and to suppress this warning\n/jenkins/workspace/uca-network-slb/src/main/java/com/uca/network/slb/service/impl/ComputeServiceImpl.java:129: warning: non-varargs call of varargs method with inexact argument type for last parameter;\n        String url = EnumUrls.query_vm_by_process_id.getUrlWithParam(new String[]{serverConfig.getComputeFlowServiceUrl(), processId});\n                                                                     ^\n  cast to Object for a varargs call\n  cast to Object[] for a non-varargs call and to suppress this warning\nNote: Some input files use or override a deprecated API.\nNote: Recompile with -Xlint:deprecation for details.\nNote: Some input files use unchecked or unsafe operations.\nNote: Recompile with -Xlint:unchecked for details.\n18 warnings\n\n&gt; Task :processResources\n&gt; Task :classes\n&gt; Task :bootJar\n&gt; Task :jar SKIPPED\n&gt; Task :assemble\n&gt; Task :compileTestJava\n&gt; Task :processTestResources NO-SOURCE\n&gt; Task :testClasses\n&gt; Task :test\n&gt; Task :check\n&gt; Task :build\n\nDeprecated Gradle features were used in this build, making it incompatible with Gradle 5.0.\nUse '--warning-mode all' to show the individual deprecation warnings.\nSee <a href='https://docs.gradle.org/4.10/userguide/command_line_interface.html#sec:command_line_warnings'>https://docs.gradle.org/4.10/userguide/command_line_interface.html#sec:command_line_warnings</a>\n\nBUILD SUCCESSFUL in 26s\n5 actionable tasks: 5 executed\ndocker buildx build --push --platform linux/amd64,linux/arm64 --build-arg JAR_FILE=build/libs/*.jar -f docker/Dockerfile --tag harbor-local.unicloudsrv.com/moove/uca-network-slb:20240508-v1 .\n#1 [internal] load .dockerignore\n#1 sha256:b13e7ce72e85540d97f543d6f4b6253be6cf9a6fefb68f73bcc2370e0c0f9481\n#1 transferring context: 2B done\n#1 DONE 0.0s\n\n#2 [internal] load build definition from Dockerfile\n#2 sha256:425c97c9992cca3ec991ede58a6b745bca31973ec7932e578d24030f3fa85063\n#2 transferring dockerfile: 252B 0.0s done\n#2 DONE 0.1s\n\n#4 [linux/amd64 internal] load metadata for harbor-local.unicloudsrv.com/library/adoptopenjdk:8-jdk-moove.1\n#4 sha256:b6511c89f47a7a5012bf794130a9554082a949a7e182edb26cbc788b4182e942\n#4 ...\n\n#5 [auth] library/adoptopenjdk:pull token for harbor-local.unicloudsrv.com\n#5 sha256:d70a84a7999f99930cd82b86313e96bab6215275a72ce31c249d7860d91d80eb\n#5 DONE 0.0s\n\n#3 [linux/arm64 internal] load metadata for harbor-local.unicloudsrv.com/library/adoptopenjdk:8-jdk-moove.1\n#3 sha256:0f752ffc0a3926bd6b00cc8c9e274b7de4f777398e9cbb1cbdd0dd449f795815\n#3 DONE 0.5s\n\n#4 [linux/amd64 internal] load metadata for harbor-local.unicloudsrv.com/library/adoptopenjdk:8-jdk-moove.1\n#4 sha256:b6511c89f47a7a5012bf794130a9554082a949a7e182edb26cbc788b4182e942\n#4 DONE 0.5s\n\n#9 [linux/amd64 1/4] FROM harbor-local.unicloudsrv.com/library/adoptopenjdk:8-jdk-moove.1@sha256:5a09168f0756d76e2d632152253df4b02984aab6f1e1f98a843f753121b9500f\n#9 sha256:a1ef40cfc8fea6686fd14c90ce114cdef030d548fd2e61a38440b20424ad703f\n#9 resolve harbor-local.unicloudsrv.com/library/adoptopenjdk:8-jdk-moove.1@sha256:5a09168f0756d76e2d632152253df4b02984aab6f1e1f98a843f753121b9500f 0.0s done\n#9 DONE 0.1s\n\n#14 [linux/arm64 1/4] FROM harbor-local.unicloudsrv.com/library/adoptopenjdk:8-jdk-moove.1@sha256:5a09168f0756d76e2d632152253df4b02984aab6f1e1f98a843f753121b9500f\n#14 sha256:edcaf2dcc25db90622c80366e73c0644249d55200d8b27a8c93dff3d92265e74\n#14 resolve harbor-local.unicloudsrv.com/library/adoptopenjdk:8-jdk-moove.1@sha256:5a09168f0756d76e2d632152253df4b02984aab6f1e1f98a843f753121b9500f 0.1s done\n#14 DONE 0.1s\n\n#12 [internal] load build context\n#12 sha256:f8511966997acfe11283594327e7284dfc5bd3d78ff3366f01a0604bce3db499\n#12 transferring context: 115.86MB 1.7s done\n#12 DONE 1.8s\n\n#8 [linux/amd64 2/4] WORKDIR /opt/uca-network-slb\n#8 sha256:81a435a5baa262a16ff68a15249064f942733a8b4ed616aba1385f844f2a010f\n#8 CACHED\n\n#13 [linux/arm64 2/4] WORKDIR /opt/uca-network-slb\n#13 sha256:ea5e6a8f6099d541c76c46139785f6ef8002f326a554364a787a80dc2949e680\n#13 CACHED\n\n#11 [linux/arm64 3/4] COPY build/libs/*.jar uca-network-slb.jar\n#11 sha256:e968472eb0a067cf5a73b10cb571d5f9a114ed63c23da1bbab704eb3f2b49b02\n#11 DONE 0.8s\n\n#7 [linux/amd64 3/4] COPY build/libs/*.jar uca-network-slb.jar\n#7 sha256:7981913ce84fb7dba661572fa68e913b3983d905cc073e9160699551ae63edc4\n#7 DONE 0.8s\n\n#10 [linux/arm64 4/4] COPY docker/startup.sh .\n#10 sha256:da838a207e4f348e2bb3e1e9ee78bce3975c2b89f8ba47c83d3d52a478450d2d\n#10 DONE 0.3s\n\n#6 [linux/amd64 4/4] COPY docker/startup.sh .\n#6 sha256:a254535d19bd2b22ff2ebdcf2e3df18251647f25e61478aab5acfd9f4d58cc94\n#6 DONE 0.3s\n\n#15 exporting to image\n#15 sha256:919cbebd6a1f60dcafeef7e0fecdc7005f8a9bbabaefeec2c565ebb20b561619\n#15 exporting layers\n#15 exporting layers 6.4s done\n#15 exporting manifest sha256:ec8daf3d80ed5a76133c7cdeb1218751608a25f56614de8f7e7840bd766292af 0.0s done\n#15 exporting config sha256:4545ad1ee763cf1934fbb4d67f480c2401ee50ef923b2973466e1028369f3152 0.0s done\n#15 exporting manifest sha256:107c57984853fb781084276674340d70045a64ff5bd65949cbadf64e04f0094c 0.0s done\n#15 exporting config sha256:49e45539035dfacf825a1849bbdf70db98519e1c46445ca9e8d53f2c5d50ed81 0.0s done\n#15 exporting manifest list sha256:493a5f683052d459fc43460f0d20f448d39676cd812673f4db3cdefa88baf644 0.0s done\n#15 pushing layers\n#15 ...\n\n#16 [auth] moove/uca-network-slb:pull,push token for harbor-local.unicloudsrv.com\n#16 sha256:1dc10abbd72660e180a11db75877d201d8c4fafdd36a227d016ed9cada1c963e\n#16 DONE 0.0s\n\n#15 exporting to image\n#15 sha256:919cbebd6a1f60dcafeef7e0fecdc7005f8a9bbabaefeec2c565ebb20b561619\n#15 pushing layers 5.6s done\n#15 pushing manifest for harbor-local.unicloudsrv.com/moove/uca-network-slb:20240508-v1@sha256:493a5f683052d459fc43460f0d20f448d39676cd812673f4db3cdefa88baf644\n#15 pushing manifest for harbor-local.unicloudsrv.com/moove/uca-network-slb:20240508-v1@sha256:493a5f683052d459fc43460f0d20f448d39676cd812673f4db3cdefa88baf644 3.1s done\n#15 DONE 15.2s\nFinished: SUCCESS\n</pre>"
</script>
<style>
.formatted-text pre {
  white-space: pre-wrap; /* 或者使用 'pre' 如果你不希望自动换行 */
  /* 内边距 */
  padding:10px;
  color: #333; /* 设置字体颜色 */
  font-size: 14px;
}

.formatted-text pre a {
  text-decoration: none; /* 取消链接的下划线 */
}

.formatted-text pre a:hover {
  text-decoration: none; /* 鼠标悬浮时也不显示下划线 */
}
</style>